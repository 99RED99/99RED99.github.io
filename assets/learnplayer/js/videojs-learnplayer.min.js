!function(){"use strict";var e=null;e=void 0===window.videojs&&"function"==typeof require?require(VJS_MODULE||"video.min"):window.videojs,function(j,S){function a(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}var r="vjs-volume-settings";var c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},e=S.getComponent("Component"),n=S.getComponent("Button"),p=S.getComponent("Menu"),l=S.getComponent("MenuButton"),i=S.getComponent("MenuItem"),o=S.getComponent("ModalDialog"),s=S.getComponent("TextTrackDisplay"),h=S.getComponent("TextTrackMenuItem"),d=S.getComponent("PlaybackRateMenuButton"),m=S.getComponent("BigPlayButton"),f=function(e,t){var n=new j.WebVTT.Parser(j,j.vttjs,j.WebVTT.StringDecoder()),o=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){o.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<o.length&&(j.console&&j.console.groupCollapsed&&j.console.groupCollapsed("Text Track parsing errors for "+t.src),o.forEach(function(e){return S.log.error(e)}),j.console&&j.console.groupEnd&&j.console.groupEnd()),n.flush()},y=function(r){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,i);var t=e.src;delete e.src;var n=u(this,r.call(this,e));if(n.loaded_=!1,"chapters"===n.kind&&t&&Array.isArray(t)&&0<t.length){var o="WEBVTT";for(var s in t)o+="\n\n"+S.formatTime(t[s].startTime,3600)+".000 --\x3e "+S.formatTime(t[s].endTime,3600)+".000",o+="\n"+t[s].text;n.loaded_=!0,setTimeout(function(){f(o,n)},200)}else!function(e,u,p){var t={uri:e},n=S.isCrossOrigin(e);n&&(t.cors=n),S.xhr(t,S.bind(this,function(e,t,n){if(e)return S.log.error(e,t);if(p.loaded_=!0,"smi"===u){for(var o,s,r=n.split(/<sync /gi),i="WEBVTT",a=0;a<r.length;a++)0!=a&&(o=r[a].toLowerCase().split(">")[0].replace(/[^0-9]/gi,""),l=r[a].replace(/start=(\'?\"?)[0-9]{0,10}(\'?\"?)>|<(\/?)(p|body|sami)(.*?)>/gi,""),s=a<r.length-1?r[a+1].toLowerCase().split(">")[0].replace(/[^0-9]/gi,""):82800,i+="\n\n"+new Date(1*o).toISOString().slice(11,-1)+" --\x3e "+new Date(1*s).toISOString().slice(11,-1),i+="\n"+l);n=i}else if("srt"===u){var l;for((r=(n=n.replace(/\r/g,"")).split(/(\d+\n\d{2}:\d{2}:\d{2},\d{3} --> \d{2}:\d{2}:\d{2},\d{3})/g)).shift(),i="WEBVTT",a=0;a<r.length;a+=2)i+="\n\n"+r[a].split(/\n/g)[1].replace(",",".").replace(",","."),i+="\n"+(l=r[a+1].replace(/\n/g,""));n=i}if("function"!=typeof j.WebVTT){if(p.tech_){var c=function(){return f(n,p)};p.tech_.on("vttjsloaded",c),p.tech_.on("vttjserror",function(){S.log.error("vttjs failed to load, stopping trying to process "+p.src),p.tech_.off("vttjsloaded",c)})}}else f(n,p)}))}(n.src=t,e.class,n);return n}return t(i,r),i}(S.TextTrack),v=function(s){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,r);var t=u(this,s.call(this)),n=void 0,o=new y(e);return t.kind=o.kind,t.src=o.src,t.srclang=o.language,t.label=o.label,t.default=o.default,Object.defineProperties(t,{readyState:{get:function(){return n}},track:{get:function(){return o}}}),n=0,o.addEventListener("loadeddata",function(){n=2,t.trigger({type:"load",target:t})}),t}return t(r,s),r}(S.EventTarget);v.prototype.allowedEvents_={load:"load"},v.NONE=0,v.LOADING=1,v.LOADED=2,v.ERROR=3;var k=function(o){function s(r,e,t){c(this,s);var n=u(this,o.call(this,r,e,t));return r.ready(S.bind(n,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)this.hide();else{for(var e=this.options_.playerOptions.subtitles_||[],t=0;t<e.length;t++){var n=S.mergeOptions(e[t],{tech:r.tech_}),o=new v(n);this.player_.tech_.remoteTextTrackEls().addTrackElement_(o),this.player_.tech_.remoteTextTracks().addTrack(o.track),this.options_.playerOptions.tracks.push(n)}var s=this.options_.playerOptions.chapters_||[];for(t=0;t<s.length;t++){n=S.mergeOptions(s[t],{tech:r.tech_}),o=new v(n);this.player_.tech_.remoteTextTrackEls().addTrackElement_(o),this.player_.tech_.remoteTextTracks().addTrack(o.track),this.options_.playerOptions.tracks.push(n)}this.preselectTrack()}})),n}return t(s,o),s.prototype.preselectTrack=function(){for(var e=this.player_.textTracks(),t=void 0,n=void 0,o=e.length-1;0<=o;o--){var s=e[o];-1<["captions","subtitles"].indexOf(s.kind)&&(!t&&s.default&&(t=s),n||this.player_.language_!==s.language||(n=s))}for(o=e.length-1;0<=o;o--){s=e[o];if(-1<["captions","subtitles"].indexOf(s.kind)){if(t&&t===s){s.mode="showing",this.player_.cache_.trackIndex=o;break}if(!t&&n&&n===s){this.player_.cache_.trackIndex=o;break}this.player_.cache_.trackIndex=o}}},s}(s);e.registerComponent("TextTrackCustomDisplay",k);var b=function(n){function o(e,t){return c(this,o),u(this,n.call(this,e,t))}return t(o,n),o.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-topbar-text",dir:"ltr",innerHTML:"<span>"+this.options_.playerOptions.topbar.topbarText.title+"</span>"})},o}(e);e.registerComponent("TopbarText",b);var g=function(o){function s(e,t){c(this,s);var n=u(this,o.call(this,e,t));return n.controlText(t&&t.controlText||n.localize("Bookmark")),n}return t(s,o),s.prototype.buildCSSClass=function(){return"vjs-icon-book "+o.prototype.buildCSSClass.call(this)},s.prototype.handleClick=function(e){"Bookmark-menu"==this.player_.controlBar.SettingMenuButton.selectedMenuName?this.player_.controlBar.SettingMenuButton.unpressButton():(this.player_.controlBar.SettingMenuButton.selectedMenuName="Bookmark-menu",this.player_.controlBar.SettingMenuButton.pressButton())},s}(n);e.registerComponent("BookButton",g);var _=function(o){function s(e,t){c(this,s);var n=u(this,o.call(this,e,t));return n.controlText(t&&t.controlText||n.localize("QNA")),t.playerOptions.topbar.qnaButton.href&&0!=t.playerOptions.topbar.qnaButton.href.length||"function"==typeof t.playerOptions.topbar.qnaButton.callback?n.show():n.hide(),n}return t(s,o),s.prototype.buildCSSClass=function(){return"vjs-icon-qna "+o.prototype.buildCSSClass.call(this)},s.prototype.handleClick=function(e){this.options_.playerOptions.topbar.qnaButton.callback=S.bind(this,function(e){!0===this.options_.playerOptions.topbar.qnaButton.isPlayStop&&this.player().pause();if("function"==typeof this.options_.playerOptions.topbar.qnaButton.extraFunction)this.options_.playerOptions.topbar.qnaButton.extraFunction();else if(this.options_.playerOptions.topbar.qnaButton.href&&0!=this.options_.playerOptions.topbar.qnaButton.href.length){var t=S.parseUrl(this.options_.playerOptions.topbar.qnaButton.href);this.options_.playerOptions.topbar.qnaButton.target&&"_blank"==this.options_.playerOptions.topbar.qnaButton.target?j.open(t.protocol+"//"+t.host+t.pathname+t.search+t.hash):j.location.href=t.protocol+"//"+t.host+t.pathname+t.search+t.hash}}),this.options_.playerOptions.topbar.qnaButton.pauseOnOpen=!1,this.player().trigger("messageLayer",this.options_.playerOptions.topbar.qnaButton)},s}(n);e.registerComponent("QnaButton",_);var C=function(i){function a(e,t){c(this,a);var n=t.track,o=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.startTime=o.startTime,t.label=o.text,t.selected=o.startTime<=s&&s<o.endTime;var r=u(this,i.call(this,e,t));return r.track=n,r.cue=o,n.addEventListener("cuechange",S.bind(r,r.update)),r}return t(a,i),a.prototype.createEl=function(){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",{className:"vjs-menu-item",innerHTML:'<div><span class="vjs-menu-item-startTime">'+S.formatTime(this.options_.startTime,3600)+'</span><span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span></div>",tabIndex:-1})},a.prototype.handleClick=function(e){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},a.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},a}(i);e.registerComponent("IndexTrackItem",C);var T=function(a){function l(e,t,n){c(this,l),t.pauseOnOpen=!1,t.temporary=!1;var o=u(this,a.call(this,e,t));S.dom.addClass(o.contentEl(),"vjs-cScrollbar"),S.dom.setAttribute(o.contentEl(),"tabindex",-1),o.on("mouseover",S.bind(o,function(){this.contentEl_.focus()}));var s=e.textTracks(),r=S.bind(o,o.updateTrack);if(s.addEventListener("removetrack",r),s.addEventListener("addtrack",r),e.on("ready",r),e.on("dispose",function(){s.removeEventListener("removetrack",r),s.removeEventListener("addtrack",r)}),o.indexButton=n,o.hasBeenOpened_=o.hasBeenFilled_=!0,this.options_.playerOptions.topbar.topbarText.title){var i=S.dom.createEl("div",{className:"vjs-menu-title",innerHTML:this.options_.playerOptions.topbar.topbarText.title,tabIndex:-1});S.dom.prependTo(i,o.el())}return o.endDialog=S.dom.createEl("p",{className:"vjs-control-text",textContent:o.localize("End of dialog window.")}),o.el().appendChild(o.endDialog),o}return t(l,a),l.prototype.updateTrack=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack());var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.menuEl_=t.el_,this.fill(),this.buttonPressed_=!1,this.items&&this.items.length<=0?(t.hide(),this.indexButton.hide()):(t.show(),this.indexButton.show())},l.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.updateTrack.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},l.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if("chapters"===n.kind)return n}},l.prototype.createMenu=function(){var e=new p(this.player_);if(this.items=this.createItems(),this.items)for(var t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e},l.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,o=t.length;n<o;n++){var s=t[n],r=new C(this.player_,{track:this.track_,cue:s});e.push(r)}return e},l.prototype.open=function(){this.player_.topbarWrap.toggleClass("vjs-zeroOpacity"),this.player_.controlBar.playbackRateMenu1Button.unpressButton(),this.player_.controlBar.SettingMenuButton.unpressButton(),a.prototype.open.call(this),this.player_.controls(!0)},l.prototype.close=function(){this.player_.topbarWrap.toggleClass("vjs-zeroOpacity"),this.indexButton.unpressButton(),a.prototype.close.call(this)},l.prototype.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},l.prototype.content=function(){return this.menuEl_},l.prototype.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-index-layer"},l.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(document,"keydown",this.handleKeyDown),this.player_.$(".vjs-icon-index").focus()},l}(o);e.registerComponent("IndexLayer",T);var B=function(o){function s(e,t){c(this,s);var n=u(this,o.call(this,e,t));return n.controlText(t&&t.controlText||n.localize("Index")),n.el_.setAttribute("aria-haspopup","true"),n.hide(),n.enabled_=!0,n.on("tap",n.handleClick),n.on("click",n.handleClick),n.on("focus",n.handleFocus),n.on("blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n.indexLayer=new T(e,t,n),e.addChild(n.indexLayer),n}return t(s,o),s.prototype.buildCSSClass=function(){return"vjs-icon-index "+o.prototype.buildCSSClass.call(this)},s.prototype.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},s.prototype.handleFocus=function(){this.on(document,"keydown",S.bind(this,this.handleKeyPress))},s.prototype.handleBlur=function(){this.off(document,"keydown",S.bind(this,this.handleKeyPress))},s.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},s.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.el_.focus()))},s.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,S.browser.IS_IOS&&S.dom.isInFrame())return;this.indexLayer.open()}},s.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"))},s.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled")},s.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled")},s}(n);e.registerComponent("IndexButton",B);var x=function(n){function o(e,t){return c(this,o),u(this,n.call(this,e,t))}return t(o,n),o.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-topbar-wrap",dir:"ltr"}),t=this;return setTimeout(function(){t.player_.el_.insertBefore(e,t.player_.el_.getElementsByTagName("video")[0])},1),e},o.prototype.options_={children:["topbarText","bookButton","qnaButton","IndexButton"]},o}(e);e.registerComponent("TopbarWrap",x);var w=function(n){function o(e,t){return c(this,o),u(this,n.call(this,e,t))}return t(o,n),o.prototype.handleClick=function(e){this.player_.paused()?(this.controlText("Pause"),n.prototype.handleClick.call(this,e)):(this.player_.pause(),this.controlText("Play")),this.player_.focus(),this.player().getChild("ResolutionOSDButton").hide()},o.prototype.controlText_="Pause",o}(m);e.registerComponent("BigPlay1Button",w);var M=function(o){function s(e,t){c(this,s);var n=u(this,o.call(this,e,t));return e.on("updateSources",S.bind(this,this.createResolutionMenu)),n}return t(s,o),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:"vjs-resolution-button"})},s.prototype.createResolutionMenu=function(){var e=new p(this.player());S.dom.addClass(e.contentEl().parentNode,"quality-menu"),this.sources=this.player_.getGroupedSrc();var t=this.sources&&this.sources.label||{};for(var n in t)t.hasOwnProperty(n)&&e.addChild(new L(this.player_,{label:n,src:t[n],selected:n===(!!this.currentSelection&&this.currentSelection.label)}));this.addChild(e)},s}(e);e.registerComponent("ResolutionOSDButton",M);var O=function(s){function r(e,t){c(this,r);var n=u(this,s.call(this,e,t));n.controlText(t&&t.controlText||n.localize("captions toggle")),n.selected=!1;var o=e.textTracks();return(n._tracks=o).addEventListener("removetrack",S.bind(n,n.updateTrack)),o.addEventListener("addtrack",S.bind(n,n.updateTrack)),e.on("ready",S.bind(n,n.updateTrack)),e.on("dispose",function(){o.removeEventListener("removetrack",S.bind(n,n.updateTrack)),o.removeEventListener("addtrack",S.bind(n,n.updateTrack))}),n}return t(r,s),r.prototype.updateTrack=function(e){this.selected=!1;for(var t=0;t<this._tracks.length;t++)if(this.player_.cache_.trackIndex==t&&"showing"==this._tracks[t].mode){this.selected=!0;break}this.selected?(this.addClass("vjs-selected"),this.player_.addClass("vjs-active-texttrack")):(this.removeClass("vjs-selected"),this.player_.removeClass("vjs-active-texttrack")),-1<this.player_.cache_.trackIndex?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.prototype.toggleCaptions=function(){for(var e=0;e<this._tracks.length;e++)if(-1<["captions","subtitles"].indexOf(this._tracks[e].kind))if(this.selected)this._tracks[e].mode="disabled";else if(this.player_.cache_.trackIndex==e){this._tracks[e].mode="showing";break}this.selected?(this.selected=!1,this.removeClass("vjs-selected"),this.player_.removeClass("vjs-active-texttrack")):(this.selected=!0,this.addClass("vjs-selected"),this.player_.addClass("vjs-active-texttrack"))},r.prototype.setSelected=function(){this.selected||(this.selected=!0,this.addClass("vjs-selected"))},r.prototype.buildCSSClass=function(){return"vjs-captions-button vjs-hidden "+s.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.toggleCaptions()},r}(n);e.registerComponent("CaptionsToggleButton",O);var E=function(n){function o(e,t){return c(this,o),u(this,n.call(this,e,t))}return t(o,n),o.prototype.handleClick=function(e){this.buttonPressed_?this.unpressButton():(this.player_.controlBar.SettingMenuButton.unpressButton(),this.player_.topbarWrap.IndexButton.indexLayer.hasClass("vjs-hidden")||this.player_.topbarWrap.IndexButton.indexLayer.close(),this.pressButton())},o}(d);e.registerComponent("PlaybackRateMenu1Button",E);var I=function(o){function s(e,t){c(this,s),t.selectable=!0;var n=u(this,o.call(this,e,t));return this.src=t.src,e.on("resolutionchange",S.bind(this,this.update)),n}return t(s,o),s.prototype.handleClick=function(e){i.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},s.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label)},s}(i);e.registerComponent("ResolutionMenuItem",I);var L=function(n){function o(e,t){return c(this,o),u(this,n.call(this,e,t))}return t(o,n),o.prototype.handleClick=function(e){n.prototype.handleClick.call(this,e),this.player().getChild("ResolutionOSDButton").hide(),this.player().play()},o}(I);e.registerComponent("ResolutionOSDMenuItem",L);var P=function(r){function i(e,t){c(this,i),this.label=document.createElement("span"),t.label="Quality";var n=u(this,r.call(this,e,t));this.el().setAttribute("aria-label","Quality"),this.controlText("Quality");var o=S.dom||S;if(t.dynamicLabel)o.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var s=document.createElement("span");o.addClass(s,"vjs-menu-icon"),this.el().appendChild(s)}return e.on("updateSources",S.bind(this,this.update)),n}return t(i,r),i.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var n in t)t.hasOwnProperty(n)&&e.push(new I(this.player_,{label:n,src:t[n],selected:n===(!!this.currentSelection&&this.currentSelection.label)}));return e},i.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",l.prototype.update.call(this)},i.prototype.buildCSSClass=function(){return"vjs-resolution-button "+l.prototype.buildCSSClass.call(this)},i.prototype.buildWrapperCSSClass=function(){return"vjs-resolution-button "+l.prototype.buildWrapperCSSClass.call(this)},i}(l);e.registerComponent("ResolutionMenuButton",P);var N=function(r){function i(e,t){c(this,i);var n=t.item;t.selectable=!0,t.label=n.text;var o=u(this,r.call(this,e,t));o.item=n,o.on(e,"bookmarkMenuItemChange",o.update);var s="click";return this.player_.options_.isMobile&&(s="touchend"),o.on(o.$(".vjs-bookmark-item-del"),s,S.bind(o,function(e){if(e.stopPropagation(),e.preventDefault(),e&&e.target.classList.contains("vjs-bookmark-item-del")){this.player().trigger("bookmarkMenuItemChange",{id:this.player().bookmarkPlayId});var t=this.player_.controlBar.SettingMenuButton.itemsMenu.getChildById(this.id()),n=this.player_.controlBar.SettingMenuButton.itemsMenu.children_.indexOf(t);return-1<n&&(this.player_.options_.bookmarks.items.splice(n,1),this.player_.controlBar.SettingMenuButton.itemsMenu.removeChild(this)),this.player().isBookmarkPlay&&this.player().bookmarkPlayId==this.id()&&(this.player_.controlBar.SettingMenuButton.setBookmarkMenuForm(null,S.formatTime(this.player().currentTime(),3600),S.formatTime(this.player().currentTime()+5,3600)),this.player_.abLoopPlugin.disable(),this.player().isBookmarkPlay=!1,this.player().bookmarkPlayId=""),void(this.player_.options_.bookmarks.extraFunctions.remove&&this.player_.options_.bookmarks.extraFunctions.remove(this.item))}})),o}return t(i,r),i.prototype.createEl=function(e,t,n){var o='<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>";return o+='<button class="vjs-icon-delete_forever vjs-bookmark-item-del vjs-control vjs-button" type="button" title="삭제" aria-disabled="false"><span aria-hidden="true" class="vjs-icon-placeholder vjs-bookmark-item-del"></span><span class="vjs-control-text" aria-live="polite">삭제</span></button>',r.prototype.createEl.call(this,e,{innerHTML:o},n)},i.prototype.handleClick=function(e){this.player().isBookmarkPlay&&this.player().isBookmarkPlay&&this.player().bookmarkPlayId==this.id()?(this.player_.controlBar.SettingMenuButton.setBookmarkMenuForm(null,S.formatTime(this.player().currentTime(),3600),S.formatTime(this.player().currentTime()+5,3600)),this.player_.abLoopPlugin.disable(),this.player().isBookmarkPlay=!1,this.player().bookmarkPlayId=""):(this.player_.controlBar.SettingMenuButton.setBookmarkMenuForm(this.item.text,S.formatTime(parseInt(this.item.startTime),3600),S.formatTime(parseInt(this.item.endTime),3600),"modify"),this.player_.abLoopPlugin.setStart(this.item.startTime).setEnd(this.item.endTime).enable(),this.player().isBookmarkPlay=!0,this.player().bookmarkPlayId=this.id()),this.player().trigger("bookmarkMenuItemChange",{id:this.player().bookmarkPlayId})},i.prototype.update=function(e,t){this.selected(this.id()===t.id)},i.prototype.modifyEl=function(e){this.item=e,S.dom.textContent(this.$(".vjs-menu-item-text"),e.text),this.player_.abLoopPlugin.disable(),this.player().isBookmarkPlay=!1,this.handleClick()},i}(i);e.registerComponent("BookmarkMenuItem",N);var $=function(o){function n(e,t){return c(this,n),t.selectable=!0,u(this,o.call(this,e,t))}return t(n,o),n.prototype.handleClick=function(e){if(!this.isSelected_){this.player_.controlBar.captionsToggleButton.setSelected();var t=this.player_.textTracks();if(t){for(var n=0;n<t.length;n++){if(t[n]===this.track){this.player_.cache_.trackIndex=n;break}}o.prototype.handleClick.call(this,e)}}},n.prototype.handleTracksChange=function(e){var t=this.player_.textTracks();t&&this.selected(t[this.player_.cache_.trackIndex]===this.track)},n}(h);e.registerComponent("CaptionsMenuItem",$);var F=function(s){function n(e,t){return c(this,n),t.selectable=!1,u(this,s.call(this,e,t))}return t(n,s),n.prototype.createEl=function(e,t,n){this.nonIconControl=!0,this.tabIndex_=-1;var o=S.dom.createEl("li",{className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.labelObj.name)+'</span><span class="vjs-menu-item-text">'+this.localize(this.options_.labelObj.description)+"</span>",tabIndex:-1});return s.prototype.createControlTextEl.call(this,o),o},n.prototype.handleClick=function(e){},n}(i);e.registerComponent("HotkeysMenuItem",F);var A=function(n){function o(e,t){return c(this,o),t.selectable=!1,u(this,n.call(this,e,t))}return t(o,n),o.prototype.handleClick=function(e){},o}(i);e.registerComponent("InfoMenuItem",A);var R=function(o){function n(e,t){return c(this,n),u(this,o.call(this,e,t))}return t(n,o),n.prototype.createEl=function(e,t,n){return o.prototype.createEl.call(this,e,{className:"vjs-menu-item vjs-hidden "+this.options_.label.replace(" ","_"),innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>"},n)},n.prototype.handleClick=function(e){o.prototype.handleClick.call(this,e),this.options_.parentObj.selectedMenuName=this.options_.label.replace(" ","_")+"-menu",this.options_.parentObj.pressButton()},n}(i);e.registerComponent("SettingMenuItem",R);var D=function(e){function s(e,t){c(this,s),this.menuList={},this.selectedMenuName="basic-menu";var n=u(this,l.call(this,e,t));t.playerOptions.bookmarks.isUse&&n.createBookmarkMenu(),e.on("updateSources",S.bind(this,this.createResolutionMenu));var o=e.textTracks();return o.addEventListener("removetrack",S.bind(n,n.createCaptionsMenu)),o.addEventListener("addtrack",S.bind(n,n.createCaptionsMenu)),e.on("ready",S.bind(n,n.createCaptionsMenu)),e.on("dispose",function(){o.removeEventListener("removetrack",S.bind(n,n.createCaptionsMenu)),o.removeEventListener("addtrack",S.bind(n,n.createCaptionsMenu))}),n.createHotkeysMenu(),n.createInfoMenu(),n}return t(s,l),s.prototype.createMenu=function(){var e=["Bookmark","Quality","Captions Language","Hotkeys","Info"],t=new p(this.player_,{menuButton:this});t.addClass("basic-menu");for(var n=0,o=e.length;n<o;n++)t.addChild(new R(this.player_,{label:e[n],parentObj:this}));return this.menuList["basic-menu"]=t},s.prototype.setBookmarkMenuForm=function(e,t,n,o){if(null==e){var s=0;this.player_.options_.bookmarks&&this.player_.options_.bookmarks.items&&Array.isArray(this.player_.options_.bookmarks.items)&&(s=this.player_.options_.bookmarks.items.length),e="북마크 "+(s+1)}if(this.$(".vjs-bookmark-form-name").value=e,null!=t){var r=t.split(":");this.$(".vjs-bookmark-form-starthour").value=r[0]<10?"0"+r[0]:r[0],this.$(".vjs-bookmark-form-starthour").setAttribute("data-value",this.$(".vjs-bookmark-form-starthour").value),this.$(".vjs-bookmark-form-startminute").value=r[1],this.$(".vjs-bookmark-form-startminute").setAttribute("data-value",this.$(".vjs-bookmark-form-startminute").value),this.$(".vjs-bookmark-form-startsecond").value=r[2],this.$(".vjs-bookmark-form-startsecond").setAttribute("data-value",this.$(".vjs-bookmark-form-startsecond").value)}if(null!=n){var i=n.split(":");this.$(".vjs-bookmark-form-endhour").value=i[0]<10?"0"+i[0]:i[0],this.$(".vjs-bookmark-form-endhour").setAttribute("data-value",this.$(".vjs-bookmark-form-endhour").value),this.$(".vjs-bookmark-form-endminute").value=i[1],this.$(".vjs-bookmark-form-endminute").setAttribute("data-value",this.$(".vjs-bookmark-form-endminute").value),this.$(".vjs-bookmark-form-endsecond").value=i[2],this.$(".vjs-bookmark-form-endsecond").setAttribute("data-value",this.$(".vjs-bookmark-form-endsecond").value)}S.dom.removeClass(this.$(".vjs-icon-complete"),"vjs-bookmark-form-add"),S.dom.removeClass(this.$(".vjs-icon-complete"),"vjs-bookmark-form-modify"),S.dom.removeClass(this.$(".vjs-icon-complete .vjs-icon-placeholder"),"vjs-bookmark-form-add"),S.dom.removeClass(this.$(".vjs-icon-complete .vjs-icon-placeholder"),"vjs-bookmark-form-modify"),null==o||"add"===o?(S.dom.addClass(this.$(".vjs-icon-complete"),"vjs-bookmark-form-add"),S.dom.addClass(this.$(".vjs-icon-complete .vjs-icon-placeholder"),"vjs-bookmark-form-add")):(S.dom.addClass(this.$(".vjs-icon-complete"),"vjs-bookmark-form-modify"),S.dom.addClass(this.$(".vjs-icon-complete .vjs-icon-placeholder"),"vjs-bookmark-form-modify"))},s.prototype.createBookmarkMenu=function(){var f=new p(this.player());f.off("keydown"),f.addClass("bookmark-menu");var y=new p(this.player());y.off("keydown"),y.addClass("vjs-cScrollbar"),y.setAttribute("tabindex",-1),y.on("mouseover",S.bind(y,function(){this.el_.focus()})),y.lockShowing();for(var e=0,t=this.player_.options_.bookmarks.items.length;e<t;e++)y.addChild(new N(this.player_,{item:this.player_.options_.bookmarks.items[e]}));var n=S.dom.createEl("li",{append:y.el(),className:"vjs-menu-items-wrap"});n.appendChild(y.el()),f.children_.unshift(n),S.dom.prependTo(n,f.contentEl()),this.itemsMenu=y;var o=S.dom.createEl("li",{className:"vjs-bookmark-form",innerHTML:'<div class="box1"><input class="vjs-bookmark-form-name" tabIndex="-1"/></div><div class="box2"><input class="vjs-bookmark-form-starthour" maxlength="2" value="00"/>:<input class="vjs-bookmark-form-startminute" maxlength="2" value="00"/>:<input class="vjs-bookmark-form-startsecond" maxlength="2" value="00"/>~<input class="vjs-bookmark-form-endhour" maxlength="2" value="00"/>:<input class="vjs-bookmark-form-endminute" maxlength="2" value="00"/>:<input class="vjs-bookmark-form-endsecond" maxlength="2" value="00"/><button class="vjs-icon-complete vjs-bookmark-form-add vjs-control vjs-button" type="button" title="등록/수정" aria-disabled="false"><span aria-hidden="true" class="vjs-icon-placeholder vjs-bookmark-form-add"></span><span class="vjs-control-text" aria-live="polite">등록/수정</span></button></div>'});f.children_.unshift(o),S.dom.prependTo(o,f.contentEl());var s=S.bind(this,function(e){var t=f.$(".vjs-bookmark-form-name").value,n=Number(f.$(".vjs-bookmark-form-starthour").value||"00"),o=Number(f.$(".vjs-bookmark-form-startminute").value||"00"),s=Number(f.$(".vjs-bookmark-form-startsecond").value||"00"),r=Number(f.$(".vjs-bookmark-form-endhour").value||"00"),i=Number(f.$(".vjs-bookmark-form-endminute").value||"00"),a=Number(f.$(".vjs-bookmark-form-endsecond").value||"00"),l=!0;if(t.trim().length<1)this.player().trigger("messageLayer",{pauseOnOpen:!1,messageType:"alert",title:"북마크명을 입력해 주세요.",callback:S.bind(f,function(e){this.$(".vjs-bookmark-form-name").value="",this.$(".vjs-bookmark-form-name").focus()})});else if(20<t.length)this.player().trigger("messageLayer",{pauseOnOpen:!1,messageType:"alert",title:"북마크명은 최대 20자 입니다.",callback:S.bind(f,function(e){this.$(".vjs-bookmark-form-name").value=this.$(".vjs-bookmark-form-name").value.substr(0,20),this.$(".vjs-bookmark-form-name").focus()})});else{(isNaN(r)||isNaN(i)||isNaN(a))&&(l=!1),(r<0||i<0||a<0||60<i||60<a)&&(l=!1);var c=3600*r+60*i+a;if((c<0||this.player().duration()&&c>this.player().duration())&&(l=!1),l){l=!0,(isNaN(n)||isNaN(o)||isNaN(s))&&(l=!1),(n<0||o<0||a<0||60<o||60<s)&&(l=!1);var u=3600*n+60*o+s;if((u<0||this.player().duration()&&u>this.player().duration())&&(l=!1),l)if(c<u+5)this.player().trigger("messageLayer",{pauseOnOpen:!1,messageType:"alert",title:"시작과 종료시간 간격을 5초 이상 지정하세요.",callback:S.bind(f,function(e){this.$(".vjs-bookmark-form-endsecond").focus()})});else{var p,h={startTime:u,endTime:c,text:t},d=S.bind(this,function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this.player_.controlBar.SettingMenuButton.itemsMenu.children_.indexOf(p);-1<e&&(this.player_.options_.bookmarks.items.splice(e,1,h),p.modifyEl(h))});if(e.target.classList.contains("vjs-bookmark-form-add")){this.player_.options_.bookmarks.items.push(h);p=y.addChild(new N(this.player_,{item:h})).focus(),this.player().isBookmarkPlay||this.setBookmarkMenuForm(null,S.formatTime(this.player().currentTime(),3600),S.formatTime(this.player().currentTime()+5,3600)),this.player_.options_.bookmarks.extraFunctions.add&&this.player_.options_.bookmarks.extraFunctions.add(h,d)}else{p=this.player_.controlBar.SettingMenuButton.itemsMenu.getChildById(this.player_.bookmarkPlayId);var m=this.player_.controlBar.SettingMenuButton.itemsMenu.children_.indexOf(p);-1<m&&(this.player_.options_.bookmarks.items.splice(m,1,h),p.modifyEl(h)),this.player_.options_.bookmarks.extraFunctions.modify&&this.player_.options_.bookmarks.extraFunctions.modify(h,d)}}else this.player().trigger("messageLayer",{pauseOnOpen:!1,messageType:"alert",title:"시작시간 값을 확인해 주세요.",callback:S.bind(f,function(e){this.$(".vjs-bookmark-form-starthour").value=this.$(".vjs-bookmark-form-starthour").getAttribute("data-value"),this.$(".vjs-bookmark-form-startminute").value=this.$(".vjs-bookmark-form-startminute").getAttribute("data-value"),this.$(".vjs-bookmark-form-startsecond").value=this.$(".vjs-bookmark-form-startsecond").getAttribute("data-value"),this.$(".vjs-bookmark-form-startsecond").focus()})})}else this.player().trigger("messageLayer",{pauseOnOpen:!1,messageType:"alert",title:"종료시간 값을 확인해 주세요.",callback:S.bind(f,function(e){this.$(".vjs-bookmark-form-endhour").value=this.$(".vjs-bookmark-form-endhour").getAttribute("data-value"),this.$(".vjs-bookmark-form-endminute").value=this.$(".vjs-bookmark-form-endminute").getAttribute("data-value"),this.$(".vjs-bookmark-form-endsecond").value=this.$(".vjs-bookmark-form-endsecond").getAttribute("data-value"),this.$(".vjs-bookmark-form-endsecond").focus()})})}});this.on(f.$(".vjs-icon-complete"),"click",s);var r=S.dom.createEl("li",{className:"vjs-menu-title",innerHTML:a(this.localize("Bookmark")),tabIndex:-1});this.on(r,"click",S.bind(this,function(e){this.selectedMenuName="basic-menu",this.pressButton()})),f.children_.unshift(r),S.dom.prependTo(r,f.contentEl()),this.addChild(f),S.dom.removeClass(this.menu.$(".Bookmark"),"vjs-hidden"),this.menuList["Bookmark-menu"]=f},s.prototype.createResolutionMenu=function(){var e=new p(this.player());S.dom.addClass(e.contentEl().parentNode,"quality-menu");var t=S.dom.createEl("li",{className:"vjs-menu-title",innerHTML:a(this.localize("Quality")),tabIndex:-1});this.on(t,"click",S.bind(this,function(e){this.selectedMenuName="basic-menu",this.pressButton()})),e.children_.unshift(t),S.dom.prependTo(t,e.contentEl()),this.sources=this.player_.getGroupedSrc();var n=this.sources&&this.sources.label||{};for(var o in n)n.hasOwnProperty(o)&&e.addChild(new I(this.player_,{label:o,src:n[o],selected:o===(!!this.currentSelection&&this.currentSelection.label),parentObj:this}));this.addChild(e),0<Object.keys(n).length?S.dom.removeClass(this.menu.$(".Quality"),"vjs-hidden"):S.dom.addClass(this.menu.$(".Quality"),"vjs-hidden"),this.menuList["Quality-menu"]=e},s.prototype.createCaptionsMenu=function(){var e=new p(this.player());this.captionsMenu&&(this.captionsMenu.dispose(),this.removeChild(this.captionsMenu)),S.dom.addClass(e.contentEl().parentNode,"captions-menu");var t=S.dom.createEl("li",{className:"vjs-menu-title",innerHTML:a(this.localize("Captions Language")),tabIndex:-1});this.on(t,"click",S.bind(this,function(e){this.selectedMenuName="basic-menu",this.pressButton()})),e.children_.unshift(t),S.dom.prependTo(t,e.contentEl());for(var n=this.player_.textTracks(),o=0,s=0;s<n.length;s++){var r=n[s];if(-1<["captions","subtitles"].indexOf(r.kind)&&(!r.cues||0!=r.cues.length)){o++;var i=new $(this.player_,{track:r,parentObj:this});i.addClass("vjs-"+r.kind+"-menu-item"),e.addChild(i)}}this.captionsMenu=e,this.addChild(e),0<o?S.dom.removeClass(this.menu.$(".Captions_Language"),"vjs-hidden"):S.dom.addClass(this.menu.$(".Captions_Language"),"vjs-hidden"),this.menuList["Captions_Language-menu"]=e},s.prototype.createHotkeysMenu=function(){var e=[{name:"Space Bar",description:"재생 / 일시정지"},{name:"Enter | F",description:"전체화면 / 일반화면"},{name:"Esc",description:"전체화면 해제"},{name:"M",description:"음소거 / 음소거 해제"},{name:"B",description:"북마크"},{name:"&#8593;",description:"볼륨 증가"},{name:"&#8595;",description:"볼륨 감소"},{name:"&#8592;",description:"구간 이동(-5초)"},{name:"&#8594;",description:"구간 이동(+5초)"},{name:"\t&#60;",description:"배속 감소"},{name:"&#62;",description:"배속 증가"}],t=new p(this.player());S.dom.addClass(t.contentEl().parentNode,"hotkeys-menu");var n=S.dom.createEl("li",{className:"vjs-menu-title",innerHTML:a(this.localize("Hotkeys")),tabIndex:-1});this.on(n,"click",S.bind(this,function(e){this.selectedMenuName="basic-menu",this.pressButton()})),t.children_.unshift(n),S.dom.prependTo(n,t.contentEl());for(var o=0,s=e.length;o<s;o++)t.addChild(new F(this.player_,{label:"Hotkeys",labelObj:e[o],parentObj:this}));this.addChild(t),S.dom.removeClass(this.menu.$(".Hotkeys"),"vjs-hidden"),this.menuList["Hotkeys-menu"]=t},s.prototype.createInfoMenu=function(){var e=new p(this.player());S.dom.addClass(e.contentEl().parentNode,"info-menu");var t=S.dom.createEl("li",{className:"vjs-menu-title",innerHTML:a(this.localize("Info")),tabIndex:-1});this.on(t,"click",S.bind(this,function(e){this.selectedMenuName="basic-menu",this.pressButton()})),e.children_.unshift(t),S.dom.prependTo(t,e.contentEl());var n=new A(this.player_,{label:this.options_.playerOptions.playerInfo.innerHtml||"sharePlayer",parentObj:this});e.addChild(n),this.addChild(e),S.dom.removeClass(this.menu.$(".Info"),"vjs-hidden"),this.menuList["Info-menu"]=e},s.prototype.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},s.prototype.pressButton=function(){if(this.enabled_){if(this.player_.controlBar.playbackRateMenu1Button.unpressButton(),this.player_.topbarWrap.IndexButton.indexLayer.hasClass("vjs-hidden")||this.player_.topbarWrap.IndexButton.indexLayer.close(),this.buttonPressed_=!0,this.menuButton_.el_.setAttribute("aria-expanded","true"),S.browser.IS_IOS&&S.dom.isInFrame())return;var n=this.menuList,o=this.selectedMenuName;Object.keys(n).forEach(function(e){var t=n[e];o===e?t.lockShowing():t.unlockShowing()}),this.player_.focus(),"Bookmark-menu"===o?(this.player_.addClass("vjs-active-bookmark"),this.player().isBookmarkPlay||this.setBookmarkMenuForm(null,S.formatTime(this.player().currentTime(),3600),S.formatTime(this.player().currentTime()+5,3600))):this.player_.removeClass("vjs-active-bookmark")}},s.prototype.unpressButton=function(){if(this.enabled_){this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false");var t=this.menuList;this.selectedMenuName="basic-menu",Object.keys(t).forEach(function(e){t[e].unlockShowing()}),this.player_.removeClass("vjs-active-bookmark")}},s.prototype.buildCSSClass=function(){return"vjs-icon-cog vjs-setting "+e.prototype.buildCSSClass.call(this)},s.prototype.buildWrapperCSSClass=function(){return"vjs-icon-cog vjs-setting "+e.prototype.buildWrapperCSSClass.call(this)},s.prototype.controlText_="Setting",s}(l);e.registerComponent("SettingMenuButton",D);var q=function(o){function s(e,t){c(this,s),this.messageOptions={},t.temporary=!1,t.uncloseable=!0,t.fillAlways=!0;var n=u(this,o.call(this,e,t));return n.on(e,"messageLayer",n.openWithOption),n}return t(s,o),s.prototype.openWithOption=function(e,t){this.messageOptions={},t&&(this.options_.pauseOnOpen=t.pauseOnOpen,this.messageOptions=t,this.open())},s.prototype.buildCSSClass=function(){return"vjs-message-display "+o.prototype.buildCSSClass.call(this)},s.prototype.content=function(){var e=S.dom.createEl("div",{className:"vjs-modal-dialog-box"}),t=S.dom.createEl("div",{className:"vjs-modal-dialog-title",innerHTML:this.messageOptions.title||"알림"});if(S.dom.appendContent(e,t),this.messageOptions.message&&0!=this.messageOptions.message.length){var n=S.dom.createEl("div",{className:"vjs-modal-dialog-message",innerHTML:this.messageOptions.message});S.dom.appendContent(e,n)}if(this.messageOptions.info&&0!=this.messageOptions.info.length){var o=S.dom.createEl("div",{className:"vjs-modal-dialog-info",innerHTML:this.messageOptions.info});S.dom.appendContent(e,o)}var s=S.dom.createEl("div",{className:"vjs-modal-dialog-buttonWrap"}),r=S.dom.createEl("button",{className:"vjs-modal-dialog-btn_ok",textContent:"확인"});if(S.dom.appendContent(s,r),this.on(r,"click",S.bind(this,function(e){if("function"==typeof this.messageOptions.callback){var t=this;setTimeout(function(){t.messageOptions.callback()},100)}this.close()})),this.messageOptions.messageType&&"confirm"==this.messageOptions.messageType){var i=S.dom.createEl("button",{className:"vjs-modal-dialog-btn_cancel",textContent:"취소"});S.dom.appendContent(s,i),this.on(i,"click",this.close)}return S.dom.appendContent(e,s),e},s}(o);e.registerComponent("MessageLayer",q);var H=function(o){function s(e,t){c(this,s);var n=u(this,o.call(this,e,t));return n.seekSeconds=t.seekSeconds,n.tapTimeout=t.tapTimeout,n.addChild("playToggle",{}),e.on(["playing","userinactive"],function(e){n.removeClass("show-play-toggle")}),0===n.player_.options_.inactivityTimeout&&(n.player_.options_.inactivityTimeout=5e3),n.enable(),n}return t(s,o),s.prototype.createEl=function(){return S.dom.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1})},s.prototype.handleTap=function(e){var t=this;e.target===this.el_&&(this.firstTapCaptured?(this.firstTapCaptured=!1,this.timeout&&j.clearTimeout(this.timeout),this.handleDoubleTap(e)):(this.firstTapCaptured=!0,this.timeout=j.setTimeout(function(){t.firstTapCaptured=!1,t.handleSingleTap(e)},this.tapTimeout)))},s.prototype.handleSingleTap=function(e){this.removeClass("skip"),this.toggleClass("show-play-toggle")},s.prototype.handleDoubleTap=function(e){var t=this,n=this.el_.getBoundingClientRect(),o=e.changedTouches[0].clientX-n.left;if(o<.4*n.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-this.seekSeconds)),this.addClass("reverse");else{if(!(o>n.width-.4*n.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+this.seekSeconds)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.removeClass("skip"),j.requestAnimationFrame(function(){t.addClass("skip")})},s.prototype.enable=function(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)},s.prototype.disable=function(){this.off("touchend",this.handleTap)},s}(e);e.registerComponent("TouchOverlay",H);var K=function(e){0<this.options_.continue.time&&(!0===this.options_.continue.isShowMessage?(this.options_.continue.info=S.formatTime(this.options_.continue.time),this.options_.continue.callback=S.bind(this,function(e){this.currentTime(this.options_.continue.time),this.options_.continue.time=0}),this.trigger("messageLayer",this.options_.continue)):(this.currentTime(this.options_.continue.time),this.options_.continue.time=0))},z=function(e){var a,l,c=e,u=0,i=0,p=0,h=function(e){var t=p,n=Math.floor(t),o=Math.floor(i),s=t-i;if(!(s<=0)&&(u+=s,i=t,n-o!=0))for(var r=o;r<=n;r++){null==a[r]?a[r]={second:r,count:1}:a[r].count++}};return{setFirstPlaying:function(){l=Date.now(),a=new Array(Math.floor(c.duration()))},setPlay:function(){i=p=c.currentTime()},setTimeupdate:function(){var e=c.currentTime();.3<Math.abs(e-p)||(p=e)},setStop:h,getTimeInfo:function(){c.paused()||h();for(var e,t,n=Math.floor((Date.now()-l)/1e3),o=c.duration(),s=c.played(),r=0,i=0;i<s.length;i++)e=s.start(i),o<(t=s.end(i))&&(t=o),r+=t-e;if(Array.isArray(a))for(i=0;i<a.length;i++)null==a[i]&&(a[i]={second:i,count:0});return{stayedTime:n||0,actedPlayedTime:u,playedTime:r,durationTime:o,lastTimePosition:c.currentTime(),secondStatsArray:a||[]}}}},W=function(e){1<e.sources.length&&this.updateSrc(e.sources)},Q=function(i){var a=i.options_.resolution;function n(e,t){return e.res&&t.res?+t.res-+e.res:0}function l(e){var t={label:{},res:{},type:{}};return e.map(function(e){o(t,"label",e),o(t,"res",e),o(t,"type",e),s(t,"label",e),s(t,"res",e),s(t,"type",e)}),t}function o(e,t,n){null==e[t][n[t]]&&(e[t][n[t]]=[])}function s(e,t,n){e[t][n[t]].push(n)}i.updateSrc=function(e){if(!e)return i.src();e=e.filter(function(e){try{return""!==i.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(n),this.groupedSrc=l(this.currentSources);var t=function(e,t){var n=a.default,o="";"high"===n?(n=t[0].res,o=t[0].label):"low"!==n&&null!=n&&e.res[n]?e.res[n]&&(o=e.res[n][0].label):(n=t[t.length-1].res,o=t[t.length-1].label);return{res:n,label:o,sources:e.res[n]}}(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:t.label,sources:t.sources},i.trigger("updateSources"),i.setSourcesSanitized(t.sources,t.label),i.trigger("resolutionchange"),i},i.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(e==this.currentResolutionState.label)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var n=this.groupedSrc.label[e],o=i.currentTime(),s=i.paused();this.player_.addClass("vjs-waiting"),s||(this.player_.bigPlay1Button&&this.player_.bigPlay1Button.hide(),this.player_.posterImage&&this.player_.posterImage.hide());var r="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(r="timeupdate"),i.setSourcesSanitized(n,e,t||a.customSourcePicker).one(r,function(){i.currentTime(o),i.handleTechSeeked_(),s||(i.play(),i.handleTechSeeked_(),this.player_.bigPlay1Button&&this.player_.bigPlay1Button.show(),this.player_.posterImage&&this.player_.posterImage.show()),i.trigger("resolutionchange")}),i}},i.getGroupedSrc=function(){return this.groupedSrc},i.setSourcesSanitized=function(e,t,n){return this.currentResolutionState={label:t,sources:e},"function"==typeof n?n(i,e,t):(i.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),i)},i.ready(function(){if(a.ui){var e=new P(i,a);i.controlBar.resolutionSwitcher=i.controlBar.el_.insertBefore(e.el_,i.controlBar.getChild("fullscreenToggle").el_),i.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}var o,s,r;1<i.options_.sources.length&&i.updateSrc(i.options_.sources),"Youtube"===i.techName_&&(o=i,s={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}},r=function(e,t,n){return o.tech_.ytPlayer.setPlaybackQuality(t[0]._yt),o.trigger("updateSources"),o},a.customSourcePicker=r,o.tech_.ytPlayer.setPlaybackQuality("auto"),o.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(e){for(var t in s)if(t.yt===e.data)return void o.currentResolution(t.label,r)}),o.one("play",function(){var e=o.tech_.ytPlayer.getAvailableQualityLevels(),t=[];e.map(function(e){t.push({src:o.src().src,type:o.src().type,label:s[e].label,res:s[e].res,_yt:s[e].yt})}),o.groupedSrc=l(t);var n={label:"auto",res:0,sources:o.groupedSrc.label.auto};this.currentResolutionState={label:n.label,sources:n.sources},o.trigger("updateSources"),o.setSourcesSanitized(n.sources,n.label,r)}))})},U="vjs-contextmenu";function V(e,t){if(e.options_.contextmenu.disabled)return e;var n={target:e,type:U};return["clientX","clientY","pageX","pageY","screenX","screenY"].forEach(function(e){n[e]=t[e]}),e.trigger(n)}function Y(e){var t=this.options_.contextmenu.current;if(t){var n=this.options_.contextmenu.wait;"touchend"===e.type&&Number(new Date)-t.time>=n&&V(this,e),this.options_.contextmenu.current=null}}function X(e){var t=this.options_.contextmenu.current;if(t){var n=e.touches[0],o=this.options_.contextmenu.sensitivity;(n.screenX-t.screenX>o||n.screenY-t.screenY>o)&&(this.options_.contextmenu.current=null)}}function G(e){if(!this.options_.contextmenu.current){var t=e.touches[0];this.options_.contextmenu.current={screenX:t.screenX,screenY:t.screenY,time:Number(new Date)}}}function J(e){this.options_.contextmenu.cancel&&!this.options_.contextmenu.disabled&&e.preventDefault(),V(this,e),this.off(["touchcancel","touchend"],Y),this.off("touchmove",X),this.off("touchstart",G)}S.registerPlugin("learnPlugin",function(t){var e,n;!function(p,h){var d=p.el(),m=document,e={volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!0,enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(e){return 32===e.which||179===e.which},rewindKey:function(e){return 37===e.which||177===e.which},forwardKey:function(e){return 39===e.which||176===e.which},volumeUpKey:function(e){return 38===e.which},volumeDownKey:function(e){return 40===e.which},muteKey:function(e){return 77===e.which},fullscreenKey:function(e){return 70===e.which||13===e.which},customKeys:{sppedDown:a({key:188,handler:l(-1)}),speedUp:a({key:190,handler:l(1)}),settingsBookmarkToggle:a({key:66,handler:function(e){"Bookmark-menu"==e.controlBar.SettingMenuButton.selectedMenuName?e.controlBar.SettingMenuButton.unpressButton():(e.controlBar.SettingMenuButton.selectedMenuName="Bookmark-menu",e.controlBar.SettingMenuButton.pressButton())}})}},t=S.mergeOptions||S.util.mergeOptions,f=(h=t(e,h||{})).volumeStep,n=h.seekStep,y=h.enableMute,o=h.enableVolumeScroll,v=h.enableFullscreen,k=h.enableNumbers,b=h.enableJogStyle,g=h.alwaysCaptureHotkeys,_=h.enableModifiersForNumbers,s=h.enableInactiveFocus,r=h.skipInitialFocus;d.hasAttribute("tabIndex")||d.setAttribute("tabIndex","-1"),d.style.outline="none",!g&&p.autoplay()||r||p.one("play",function(){d.focus()}),s&&p.on("userinactive",function(){var n=function(){clearTimeout(e)},e=setTimeout(function(){p.off("useractive",n);var e=m.activeElement,t=d.querySelector(".vjs-control-bar");e&&e.parentElement==t&&d.focus()},10);p.one("useractive",n)}),p.on("play",function(){var e=d.querySelector(".iframeblocker");e&&""===e.style.display&&(e.style.display="block",e.style.bottom="39px")});var i=function(e){if(p.controls()){var t=m.activeElement;if((g&&!t.classList.contains("vjs-cScrollbar")||t==d||t==d.querySelector(".vjs-tech")||t==d.querySelector(".iframeblocker")||t==d.querySelector(".vjs-control-bar"))&&o){e=j.event||e;var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));e.preventDefault(),1==n?p.volume(p.volume()+f):-1==n&&p.volume(p.volume()-f)}}},C=function(e,t){return h.playPauseKey(e,t)?1:h.rewindKey(e,t)?2:h.forwardKey(e,t)?3:h.volumeUpKey(e,t)?4:h.volumeDownKey(e,t)?5:h.muteKey(e,t)?6:h.fullscreenKey(e,t)?7:void 0};function T(e){return"function"==typeof n?n(e):n}function a(t){return t.modifiers=t.modifiers||{},{key:function(e){return e.which===t.key&&!!t.modifiers.ctrl==!!e.ctrlKey&&!!t.modifiers.shift==!!e.shiftKey&&!!t.modifiers.alt==!!e.altKey&&!!t.modifiers.meta==!!e.metaKey},handler:t.handler}}function l(s){return function(e){if(e.options_.playbackRates&&Array.isArray(e.options_.playbackRates)){for(var t=0,n=0,o=e.options_.playbackRates.length;n<o;n++)if(e.options_.playbackRates[n]==e.playbackRate()){t=n;break}e.playbackRate(e.options_.playbackRates[t+s])}}}p.on("keydown",function(e){var t,n,o=e.which,s=e.preventDefault,r=p.duration();if(p.controls()){var i=m.activeElement;if(g&&"INPUT"!=i.tagName||i==d||i==d.querySelector(".vjs-tech")||i==d.querySelector(".vjs-control-bar")||i==d.querySelector(".iframeblocker"))switch(C(e,p)){case 1:s(),g&&e.stopPropagation(),p.paused()?p.play():p.pause();break;case 2:t=!p.paused(),s(),t&&p.pause(),(n=p.currentTime()-T(e))<=0&&(n=0),p.currentTime(n),t&&p.play();break;case 3:t=!p.paused(),s(),t&&p.pause(),r<=(n=p.currentTime()+T(e))&&(n=t?r-.001:r),p.currentTime(n),t&&p.play();break;case 5:s(),b?(n=p.currentTime()-1,p.currentTime()<=1&&(n=0),p.currentTime(n)):p.volume(p.volume()-f);break;case 4:s(),b?(r<=(n=p.currentTime()+1)&&(n=r),p.currentTime(n)):p.volume(p.volume()+f);break;case 6:y&&p.muted(!p.muted());break;case 7:v&&(p.isFullscreen()?p.exitFullscreen():p.requestFullscreen());break;default:if((47<o&&o<59||95<o&&o<106)&&(_||!(e.metaKey||e.ctrlKey||e.altKey))&&k){var a=48;95<o&&(a=96);var l=o-a;s(),p.currentTime(p.duration()*l*.1)}for(var c in h.customKeys){var u=h.customKeys[c];u&&u.key&&u.handler&&u.key(e)&&(s(),u.handler(p,h,e))}}}}),p.on("dblclick",function(e){if(p.controls()){var t=e.relatedTarget||e.toElement||m.activeElement;t!=d&&t!=d.querySelector(".vjs-tech")&&t!=d.querySelector(".iframeblocker")||v&&(p.isFullscreen()?p.exitFullscreen():p.requestFullscreen())}}),p.on("mousewheel",i),p.on("DOMMouseScroll",i)}(t,t.options_.hotkey),Q(t),t.changeSouece=W,(n=e=t).on("contextmenu",S.bind(n,J)),e.on(["touchcancel","touchend"],S.bind(n,Y)),e.on("touchmove",S.bind(n,X)),e.on("touchstart",S.bind(n,G)),e.ready(function(){return n.addClass(U)}),t.on("vjs-contextmenu",function(e){var t=S.dom.createEl("div",{className:"vjs-hidden vjs-contenxtmenu"});S.dom.appendContent(this.el(),t),t.parentNode.removeChild(t)}),t.addClass("video-js"),t.on("mouseleave",function(){t.userActive(!1)}),t.on("playerresize",function(){t.trigger("texttrackchange")}),1==t.options_.isMobile?t.on("ready",function(){!function(t,n){t.addClass("vjs-mobile-ui"),(n.touchControls.disableOnEnd||"function"==typeof t.endscreen)&&t.addClass("vjs-mobile-ui-disable-end"),n.fullscreen.iOS&&S.browser.IS_IOS&&9<S.browser.IOS_VERSION&&!t.el_.ownerDocument.querySelector(".bc-iframe")&&(t.tech_.el_.setAttribute("playsinline","playsinline"),t.tech_.supportsFullScreen=function(){return!1}),t.children_.indexOf(t.getChild("ControlBar"));var o=j.screen;o.lockOrientationUniversal=function(e,t){return o.orientation.lock(e).then(function(){t.screenLocked=!0},function(e){return S.log("orientation lock not allowed")})||o.mozLockOrientation(e)||o.msLockOrientation(e)};var s=function(){return"number"==typeof j.orientation?j.orientation:o&&o.orientation&&o.orientation.angle?j.orientation:(S.log("angle unknown"),0)};t.screenLocked=!1;var e=function(){var e=s();90!==e&&270!==e&&-90!==e||!1===t.paused()&&(t.requestFullscreen(),n.fullscreen.lockOnRotate&&o.orientation&&o.orientation.lock&&o.lockOrientationUniversal("landscape",t)),0!==e&&180!==e||t.isFullscreen()&&t.exitFullscreen()};S.browser.IS_IOS?j.addEventListener("orientationchange",e):o.orientation.onchange=e,t.on("fullscreenchange",function(e){!s()&&t.isFullscreen()&&n.fullscreen.lockOnRotate&&o.lockOrientationUniversal("landscape")}),t.on("ended",function(e){!0===t.screenLocked&&(o.orientation.unlock(),t.screenLocked=!1)})}(this,t.options_.touchoverlay)}):(t.on("volumechange",function(){!function(e){try{"number"==typeof e?j.localStorage.setItem(r,e):j.localStorage.removeItem(r)}catch(e){S.log.warn(e)}}(t.muted()?0:t.volume())}),t.one("ready",function(){var e=function(){var e=void 0;try{e=j.localStorage.getItem(r)}catch(e){S.log.warn(e)}return e||(e=1),e}();0==e?t.muted(!0):(t.volume(e),t.muted(!1))}));var o=function(){t.textTrackCustomDisplay.hide()};t.on("texttrackchange",o),t.on("ready",function(){setTimeout(function(){t.off("texttrackchange",o),t.textTrackCustomDisplay.show(),t.trigger("texttrackchange")},400)}),t.one("canplay",function(){!0===t.options_.isMobile&&(t.addClass("mobileMode"),t.controlBar.playToggle.hide(),t.controlBar.volumePanel.volumeControl.hide(),t.volume(1)),!0===t.options_.learnMode&&t.addClass("learnMode")});var s=new z(t);t.getTimeInfo=s.getTimeInfo,t.one("playing",s.setFirstPlaying),t.on("play",s.setPlay),t.on("timeupdate",s.setTimeupdate),t.on(["seeking","ended","pause","waiting"],s.setStop),t.one("playing",K)})}(window,e)}();